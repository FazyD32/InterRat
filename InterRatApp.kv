<MyAppBar@MDTopAppBar>
    title: "InterRat"
    left_action_items: [['menu', lambda x: app.open_drawer()]]


<UsersTable@MDGridLayout>
    cols: 1


<UsersScreen@Screen>

    BoxLayout:
        orientation: 'vertical'
        spacing: 24

        MyAppBar:

        MDGridLayout:
            cols: 2
            spacing: 24
            padding: [24, 32, 8, 32]

            MDLabel:
                text: 'id'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: user_id

            MDLabel:
                text: 'ФИО'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: user_namefull

            MDLabel:
                text: 'Дата рождения'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: birthday

            MDLabel:
                text: 'Логин'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: user_login

            MDLabel:
                text: 'Пароль'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: user_password

            MDLabel:
                text: 'Категория пользователя'
                halign: 'left'

            MDLabel:
                text: ''
                halign: 'left'
                id: user_cat
            
            MDGridLayout:
                cols: 3
                spacing: 8
                padding: [0, 8, 8, 16]
                size_hint_y: 0.4


                MDRectangleFlatButton:
                    text: 'Добавить'
                    on_release: root.manager.current = 'usersadd'
                    id: btn_change_user

                MDRectangleFlatButton:
                    text: 'Удалить'

                MDRectangleFlatButton:
                    text: 'Изменить'

        UsersTable:

<UsersScreenAdd@Screen>:

    MDBoxLayout:
        spacing: 24
        orientation: 'vertical'

        MyAppBar:

        MDLabel:
            text: 'Добавте пользователя (Отобразится после перезагрузки)'
            halign: 'center'

        MDGridLayout:
            cols: 2
            spacing: 24
            size_hint: 0.8, 1
            pos_hint: {'center_x': 0.5,'center_y': 0.0}

            MDTextField:     
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите ФИО"
                halign: "center"
                id: fullname_field

            MDTextField:     
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите Дату рождения в Формате YYYY-MM-DD"
                halign: "center"
                id: birthday_field

            MDTextField:     
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите логин"
                icon_left: 'account'
                halign: "center"
                id: usrlogin_field

            MDTextField:     
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите пароль"
                icon_left: 'magnify'
                halign: "center"
                id: usrpassword_field

            MDGridLayout:
                cols: 2
                spacing: 16
                

                MDRectangleFlatButton:
                    text: 'Добавить'
                    on_release: root.add_user_to_base(fullname_field.text, birthday_field.text, usrlogin_field.text, usrpassword_field.text)
                    id: btn_add_user
                    

                MDRectangleFlatButton:
                    text: 'Отмена'
                    on_release: root.manager.current = 'users'
                    id: btn_add_user_cancel
                    

        MDBoxLayout:


<PasswordScreen@Screen>

    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: "Приветствуем в InterRat"

        MDLabel:
            halign: 'center'
            text: 'DesperBook'
            font_style: 'Caption'
            id: wrong_label

        MDGridLayout:
            cols: 1
            spacing: 24
            size_hint: 0.8, 1
            pos_hint: {'center_x': 0.5,'center_y': 0.5}

            MDTextField:    
                mode: "round"  
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите логин"
                halign: "center"
                icon_left: 'account'
                id: login_field

            MDTextField:    
                mode: "round"  
                text_color_focus: 'black'
                line_color_focus: 'black'
                helper_text: "Введите пароль"
                halign: "center"
                icon_left: 'magnify'
                id: passwor_field

        MDRectangleFlatButton:
            text: 'Войти'
            halign: 'center'
            size_hint: 0.4, 0.2
            pos_hint: {'center_x': 0.5,'y': 0.4}
            on_release: app.enter(login_field.text, passwor_field.text, wrong_label, root.manager)

        MDBoxLayout:


<MenuScreen@Screen>
    MDBoxLayout:
        orientation: 'vertical'

        MyAppBar:

        MDLabel:
            text: 'АМЕРИКА, гудбай'
            halign: 'center'

        Image:
            source: 'Rattt.webp'


<MyMainLayout>

    ScreenManager:
        id: my_screenmg

        PasswordScreen:

        MenuScreen:
            name: 'menu'

        UsersScreen:
            name: 'users'
            id: user_screen_id

        UsersScreenAdd:
            name: 'usersadd'
            id: useradd_screen_id

    MDNavigationDrawer:
        id: nav_drawer

        MDBoxLayout:
            orientation: 'vertical'

            MDLabel:
                text: 'InterRat'
                font_style: 'Caption'
                size_hint_y: None
                height: self.texture_size[1]

            ScrollView:

                MDList:

                    OneLineIconListItem:
                        on_release: my_screenmg.current = 'menu'
                        text: 'На главную'
                        
                        IconLeftWidget:
                            icon: 'home'

                    OneLineIconListItem:
                        on_release: my_screenmg.current = 'users'
                        text: 'Пользователи'

                        IconLeftWidget:
                            icon: 'table'
